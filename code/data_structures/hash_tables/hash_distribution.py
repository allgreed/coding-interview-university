import matplotlib.pyplot as plot
import matplotlib.patches as mpatches
import sympy

from math import floor, sqrt, log
from decimal import Decimal, getcontext
from collections import Counter
import random, string

getcontext().prec = 320

def prehash(key):
    retval = 0
    for index, char in enumerate(key):
        retval += ord(char) << (8 * index)
    return retval
    # return key

def generatePlot(data, hash_function_a, hash_function_b):
    retlist_a = [0] * len(data)
    retlist_b = [0] * len(data)

    for key in data:
        retlist_a[hash_function_a(prehash(key), len(data))] += 1
        retlist_b[hash_function_b(prehash(key), len(data))] += 1

    maxval = max(max(retlist_a), max(retlist_b)) + 1

    counter_a = Counter(retlist_a)
    counter_b = Counter(retlist_b)

    retlist_a = [0] * maxval
    retlist_b = [0] * maxval

    for i in range(maxval):
        retlist_a[i] = counter_a[i] if counter_a[i] is not None else 0
        retlist_b[i] = counter_b[i] if counter_b[i] is not None else 0

    retlist_a.pop(0)
    retlist_b.pop(0)

    retlist_a = list(map(lambda item: item / len(data) * 100, retlist_a))
    retlist_b = list(map(lambda item: item / len(data) * 100, retlist_b))
    retlist_a = [(index + 1) * item for index, item in enumerate(retlist_a)]
    retlist_b = [(index + 1) * item for index, item in enumerate(retlist_b)]

    plot.plot(range(maxval - 1), retlist_a, 'r--', range(maxval - 1), retlist_b, 'b--')
    plot.axis([0, maxval, 0, max(max(retlist_a), max(retlist_b)) + 1])

    retlist_a.pop(0)
    retlist_b.pop(0)

    mod_retlist_a = [(index) * item for index, item in enumerate(retlist_a)]
    mod_retlist_b = [(index) * item for index, item in enumerate(retlist_b)]

    coefficient_a = (sum(mod_retlist_a) / (len(data)))
    coefficient_b = (sum(mod_retlist_b) / (len(data)))

    print("Fit to data:")
    print("{}: {}%".format(hash_function_a.__name__, 100 - coefficient_a))
    print("{}: {}%".format(hash_function_b.__name__, 100 - coefficient_b))

    print(len(data) ** 2)
    print(sum(mod_retlist_a))
    print(sum(mod_retlist_b))

    relative_coefficient_a_to_b = ((max(sum(mod_retlist_a), sum(mod_retlist_b)) / min(sum(mod_retlist_a), sum(mod_retlist_b))) - 1) * 100

    if coefficient_a is not 0 and coefficient_b is not 0:
        if coefficient_a < coefficient_b:
            print("{} is {:.2f}% better than {}".format(hash_function_a.__name__, relative_coefficient_a_to_b, hash_function_b.__name__))
        else:
            print("{} is {:.2f}% better than {}".format(hash_function_b.__name__, relative_coefficient_a_to_b, hash_function_a.__name__))


    plot.xlabel("number of collisions")
    plot.ylabel("% of elements")

    red_patch = mpatches.Patch(color='red', label=hash_function_a.__name__)
    blue_patch = mpatches.Patch(color='blue', label=hash_function_b.__name__)
    plot.legend(handles=[red_patch, blue_patch])

    plot.show()
# #######################################

# data = ["Tadorna tadorna","Cordylus giganteus","Canis aureus","Merops nubicus","Crocuta crocuta","Macaca mulatta","Lamprotornis nitens","Colobus guerza","Ovibos moschatus","Cynictis penicillata","Centrocercus urophasianus","Sagittarius serpentarius","Marmota caligata","Pitangus sulphuratus","Tamiasciurus hudsonicus","Ephipplorhynchus senegalensis","Bassariscus astutus","Butorides striatus","Sterna paradisaea","Tamiasciurus hudsonicus","Dendrocygna viduata","Lepus arcticus","Dasyurus maculatus","Lamprotornis sp.","Camelus dromedarius","Lemur catta","Redunca redunca","Butorides striatus","Scolopax minor","Francolinus leucoscepus","Acridotheres tristis","Morelia spilotes variegata","Bison bison","Phalacrocorax carbo","Paroaria gularis","Aquila chrysaetos","Manouria emys","Nasua narica","Tiliqua scincoides","Phascogale calura","Coluber constrictor","Bettongia penicillata","Uraeginthus granatina","Sciurus niger","Alectura lathami","Globicephala melas","Suricata suricatta","Alopex lagopus","Falco mexicanus","Speothos vanaticus","Drymarchon corias couperi","Streptopelia senegalensis","Alces alces","Spermophilus parryii","Tringa glareola","Ictalurus furcatus","Balearica pavonina","Bubulcus ibis","Varanus sp.","Uraeginthus granatina","Globicephala melas","Ammospermophilus nelsoni","Sula dactylatra","Oxybelis sp.","Elephas maximus bengalensis","Haliaetus vocifer","Macropus eugenii","Phaethon aethereus","Plegadis ridgwayi","Anas bahamensis","Bassariscus astutus","Cathartes aura","Amphibolurus barbatus","Chauna torquata","Castor canadensis","Perameles nasuta","Buteo regalis","Nectarinia chalybea","unavailable","Bassariscus astutus","Procyon lotor","Anser caerulescens","Pycnonotus barbatus","Dasyurus viverrinus","Nyctereutes procyonoides","Zenaida galapagoensis","Eubalaena australis","Pterocles gutturalis","Vicugna vicugna","Gymnorhina tibicen","Choloepus hoffmani","Funambulus pennati","Dasyurus viverrinus","Butorides striatus","unavailable","Ephipplorhynchus senegalensis","Phalaropus fulicarius","Castor canadensis","Giraffe camelopardalis","Gekko gecko","Chlamydosaurus kingii","Semnopithecus entellus","Lepus arcticus","Spilogale gracilis","Camelus dromedarius","unavailable","Pteronura brasiliensis","Suricata suricatta","Lycosa godeffroyi","Choloepus hoffmani","Bison bison","Chlamydosaurus kingii","Ploceus rubiginosus","Castor fiber","Manouria emys","Anathana ellioti","Chamaelo sp.","Buteo jamaicensis","Anser caerulescens","Sauromalus obesus","Macaca fuscata","Haliaetus leucogaster","Ictalurus furcatus","Macropus fuliginosus","Dromaeus novaehollandiae","Parus atricapillus","Cebus apella","unavailable","Vulpes chama","Sterna paradisaea","Cebus apella","Arctogalidia trivirgata","Canis aureus","Sarkidornis melanotos","Capreolus capreolus","Aonyx cinerea","Phalacrocorax varius","Centrocercus urophasianus","Crotalus cerastes","Canis latrans","Theropithecus gelada","Hymenolaimus malacorhynchus","Ardea golieth","Felis silvestris lybica","Pterocles gutturalis","Geochelone radiata","Macropus agilis","Eubalaena australis","Coluber constrictor","Spermophilus armatus","Acridotheres tristis","Chelodina longicollis","Tragelaphus strepsiceros","Sterna paradisaea","Alopex lagopus","Canis lupus lycaon","Dendrocitta vagabunda","Agkistrodon piscivorus","Capreolus capreolus","Paroaria gularis","Dendrocygna viduata","Petaurus norfolcensis","Pseudocheirus peregrinus","Naja haje","Dicrurus adsimilis","Zosterops pallidus","Cervus duvauceli","Macropus robustus","Ammospermophilus nelsoni","Litrocranius walleri","Falco mexicanus","Psophia viridis","Cyrtodactylus louisiadensis","Dendrocitta vagabunda","Psittacula krameri","Ciconia ciconia","Speotyte cuniculata","Equus hemionus","Bucorvus leadbeateri","Pandon haliaetus","Irania gutteralis","Geochelone elephantopus","Otaria flavescens","Alcelaphus buselaphus cokii","Erinaceus frontalis","Bettongia penicillata","Thylogale stigmatica","Chlidonias leucopterus","Giraffe camelopardalis","Carduelis pinus","Anas punctata","Erethizon dorsatum","Hippotragus niger","Pteronura brasiliensis","Pelecans onocratalus","Tayassu tajacu","Damaliscus lunatus","Graspus graspus","Pavo cristatus","Macropus rufus","Acrobates pygmaeus","Epicrates cenchria maurus","Ephippiorhynchus mycteria","Madoqua kirkii","Meles meles","Ursus americanus","Herpestes javanicus","Melophus lathami","Phalacrocorax brasilianus","Nyctea scandiaca","Estrilda erythronotos","Uraeginthus angolensis","Cercopithecus aethiops","unavailable","Vanellus armatus","Nyctereutes procyonoides","Acinynox jubatus","Pelecans onocratalus","Phacochoerus aethiopus","Alopochen aegyptiacus","Ara chloroptera","unavailable","Bugeranus caruncalatus","Naja haje","Acanthaster planci","Bubo virginianus","Notechis semmiannulatus","Choloepus hoffmani","Didelphis virginiana","Gyps bengalensis","Varanus albigularis","Phasianus colchicus","Haematopus ater","Nyctea scandiaca","Tenrec ecaudatus","Tadorna tadorna","Lorythaixoides concolor","Sciurus niger","Ovis musimon","Kobus defassa","Columba palumbus","Graspus graspus","Canis mesomelas","Pseudocheirus peregrinus","Galago crassicaudataus","Lophoaetus occipitalis","Procyon lotor","Pseudocheirus peregrinus","Martes pennanti","Pelecanus conspicillatus","Deroptyus accipitrinus","Theropithecus gelada","Libellula quadrimaculata","Bison bison","Pteropus rufus","Dicrurus adsimilis","Genetta genetta","Gekko gecko","Alcelaphus buselaphus cokii","Ara ararauna","Tachyglossus aculeatus","Bassariscus astutus","Drymarchon corias couperi","Gymnorhina tibicen","Mycteria ibis","Sula dactylatra","Vulpes vulpes","Kobus defassa","Papilio canadensis","Camelus dromedarius","Dendrohyrax brucel","Columba palumbus","Sterna paradisaea","Oryx gazella callotis","Canis mesomelas","Ovis dalli stonei","Vulpes chama","Macropus parryi","Chloephaga melanoptera","Actophilornis africanus","Butorides striatus","Lepus townsendii","Nannopterum harrisi","Raphicerus campestris","Ara chloroptera","Bettongia penicillata","Erinaceus frontalis","Zalophus californicus","Spermophilus lateralis","unavailable","Vanellus sp.","Centrocercus urophasianus","Dusicyon thous","Geochelone elegans","Elephas maximus bengalensis","Nesomimus trifasciatus","Gyps fulvus","Coluber constrictor","Aonyx cinerea","Nasua narica","Colobus guerza","Acrantophis madagascariensis","Eurocephalus anguitimens","Delphinus delphis","Eudyptula minor","Phoeniconaias minor","Lorythaixoides concolor","Perameles nasuta","Stercorarius longicausus","Crotalus cerastes","Oxybelis fulgidus","Uraeginthus angolensis","Axis axis","Felis silvestris lybica","Semnopithecus entellus","Naja nivea","Sceloporus magister","Funambulus pennati","Anhinga rufa","Castor canadensis","Bradypus tridactylus","Macropus eugenii","Speothos vanaticus","Spilogale gracilis","Carduelis pinus","Erethizon dorsatum","Cygnus buccinator","Nasua nasua","Theropithecus gelada","Alligator mississippiensis","Tayassu tajacu","Phoenicopterus ruber","Toxostoma curvirostre","Pseudalopex gymnocercus","Corallus hortulanus cooki","Zalophus californicus","Trichosurus vulpecula","Vulpes cinereoargenteus","Naja haje","Butorides striatus","Sarcorhamphus papa","Phoca vitulina","Psophia viridis","Spizaetus coronatus","Phylurus milli","Propithecus verreauxi","Ammospermophilus nelsoni","Oxybelis fulgidus","Ara chloroptera","Nyctea scandiaca","Larus dominicanus","Ursus americanus","Uraeginthus granatina","Macropus rufogriseus","Boa constrictor mexicana","unavailable","Varanus sp.","Spizaetus coronatus","Cathartes aura","Agkistrodon piscivorus","Anas bahamensis","Ceratotherium simum","Spizaetus coronatus","Potorous tridactylus","Alopex lagopus","Crotalus cerastes","Dasyurus viverrinus","Larus dominicanus","Rhea americana","Plectopterus gambensis","Sylvicapra grimma","Bettongia penicillata","Oryx gazella","Gymnorhina tibicen","Connochaetus taurinus","Alcelaphus buselaphus cokii","Ardea golieth","Acrantophis madagascariensis","Lybius torquatus","Geochelone radiata","unavailable","Tamandua tetradactyla","Rangifer tarandus","Trichosurus vulpecula","Eurocephalus anguitimens","Corvus albicollis","Choriotis kori","Francolinus leucoscepus","Gazella thompsonii","Dicrostonyx groenlandicus","Speothos vanaticus","Manouria emys","Tyto novaehollandiae","Anastomus oscitans","unavailable","unavailable","Chordeiles minor","Columba livia","Ara chloroptera","Ardea golieth","Eutamias minimus","Himantopus himantopus","Xerus sp.","Pelecanus occidentalis","Cygnus atratus","Plocepasser mahali","Corallus hortulanus cooki","unavailable","Trichoglossus chlorolepidotus","Ephippiorhynchus mycteria","Colobus guerza","Pavo cristatus","Macropus agilis","Dromaeus novaehollandiae","Redunca redunca","Macropus agilis","Otaria flavescens","Varanus salvator","Bassariscus astutus","Cacatua galerita","Suricata suricatta","Lepus townsendii","Alligator mississippiensis","Speothos vanaticus","Orcinus orca","Madoqua kirkii","Varanus salvator","Haliaetus vocifer","Mycteria leucocephala","Theropithecus gelada","Anhinga rufa","Cygnus buccinator","Tapirus terrestris","Damaliscus dorcas","Merops nubicus","Calyptorhynchus magnificus","Tadorna tadorna","Felis chaus","Melursus ursinus","Cereopsis novaehollandiae","Sula nebouxii","Toxostoma curvirostre","Actophilornis africanus","Myrmecophaga tridactyla","Tayassu pecari","Theropithecus gelada","Spheniscus magellanicus","Alopex lagopus","Meleagris gallopavo","Dasyurus maculatus","Centrocercus urophasianus","Junonia genoveua","Spermophilus lateralis","Buteo jamaicensis","Paradoxurus hermaphroditus","Mycteria ibis","Eolophus roseicapillus","Phalacrocorax albiventer","Ephippiorhynchus mycteria","Phalacrocorax varius","Trachyphonus vaillantii","Bucephala clangula","Crocodylus niloticus","Trichoglossus chlorolepidotus","Laniaurius atrococcineus","Pycnonotus nigricans","Terrapene carolina","Colobus guerza","Aonyx cinerea","Agkistrodon piscivorus","Vulpes chama","Coendou prehensilis","Ardea cinerea","Ardea cinerea","Genetta genetta","Recurvirostra avosetta","Eudyptula minor","Tyto novaehollandiae","Tyto novaehollandiae","Heloderma horridum","Rhabdomys pumilio","Acrobates pygmaeus","Tachybaptus ruficollis","Climacteris melanura","Buteo galapagoensis","Ara chloroptera","Laniarius ferrugineus","Ara ararauna","Gekko gecko","Crocodylus niloticus","Perameles nasuta","Anas platyrhynchos","Zosterops pallidus","Macropus eugenii","Sula dactylatra","Scolopax minor","Gyps bengalensis","Tockus flavirostris","Alcelaphus buselaphus cokii","Amphibolurus barbatus","Cacatua tenuirostris","Himantopus himantopus","Dipodomys deserti","Limnocorax flavirostra","Haematopus ater","Felis chaus","Coluber constrictor foxii","Tockus flavirostris","Gyps fulvus","Hyaena hyaena","Certotrichas paena","Dasypus septemcincus","Oryx gazella callotis","Falco mexicanus","Otaria flavescens","Aonyx cinerea","Didelphis virginiana","Castor canadensis","Nucifraga columbiana","Cochlearius cochlearius","Rana sp.","Phalacrocorax niger","Lamprotornis nitens","Bassariscus astutus","Eira barbata","Sitta canadensis","Manouria emys","Merops nubicus","unavailable","Gyps bengalensis","Pavo cristatus","Canis aureus","Cacatua tenuirostris","Porphyrio porphyrio","Buteo galapagoensis","Spermophilus parryii","Mirounga angustirostris","Lamprotornis nitens","Macropus eugenii","Bucorvus leadbeateri","Antidorcas marsupialis","Semnopithecus entellus","Gyps bengalensis","Pitangus sulphuratus","Panthera leo persica","Ourebia ourebi","Boa constrictor mexicana","Macaca fuscata","Funambulus pennati","Colobus guerza","Halcyon smyrnesis","Lasiodora parahybana","Cygnus buccinator","Pteronura brasiliensis","unavailable","Coendou prehensilis","Phascogale calura","Chionis alba","unavailable","Lemur catta","Boa caninus","Lamprotornis nitens","Chlamydosaurus kingii","Madoqua kirkii","Lophoaetus occipitalis","Macropus eugenii","unavailable","Felis caracal","unavailable","Corvus brachyrhynchos","Platalea leucordia","unavailable","Larus dominicanus","Creagrus furcatus","Anser anser","Ninox superciliaris","Pavo cristatus","Salvadora hexalepis","Macropus agilis","Ara chloroptera","Macropus giganteus","Fratercula corniculata","Papio ursinus","Anastomus oscitans","Ardea golieth","unavailable","Corallus hortulanus cooki","Hystrix cristata","Paraxerus cepapi","Egretta thula","Petaurus norfolcensis","Lemur fulvus","Papio cynocephalus","Mycteria ibis","Numida meleagris","Melophus lathami","Callorhinus ursinus","Dicrostonyx groenlandicus","Corvus brachyrhynchos","Bos taurus","Propithecus verreauxi","Caiman crocodilus","unavailable","Trichoglossus chlorolepidotus","Ploceus intermedius","unavailable","Oryx gazella","Trachyphonus vaillantii","Coluber constrictor foxii","Chauna torquata","Tiliqua scincoides","Heloderma horridum","Macropus rufus","Macropus fuliginosus","Cercopithecus aethiops","Canis mesomelas","Melursus ursinus","Lycaon pictus","Estrilda erythronotos","Mungos mungo","Charadrius tricollaris","Marmota monax","Lorythaixoides concolor","Bubalus arnee","Sylvicapra grimma","Limnocorax flavirostra","Dusicyon thous","Genetta genetta","Porphyrio porphyrio","Ictalurus furcatus","Pseudocheirus peregrinus","Ciconia episcopus","Morelia spilotes variegata","Dicrurus adsimilis","Semnopithecus entellus","Choloepus hoffmani","Mycteria ibis","Felis libyca","Chlidonias leucopterus","Vanellus chilensis","Dasyurus maculatus","Estrilda erythronotos","Eubalaena australis","Antechinus flavipes","Varanus sp.","Helogale undulata","Cervus elaphus","Pteronura brasiliensis","Mabuya spilogaster","Carphophis sp.","Paraxerus cepapi","Bradypus tridactylus","Meleagris gallopavo","Nasua nasua","Felis silvestris lybica","Ciconia episcopus","Neophron percnopterus","Tachybaptus ruficollis","Felis concolor","Haliaeetus leucocephalus","Parus atricapillus","Eubalaena australis","Limnocorax flavirostra","Centrocercus urophasianus","Myotis lucifugus","Ceratotherium simum","Phalaropus lobatus","Pycnonotus nigricans","Ploceus intermedius","Sylvilagus floridanus","Phaethon aethereus","Estrilda erythronotos","Castor fiber","Ciconia episcopus","Dasyurus viverrinus","Varanus sp.","Felis yagouaroundi","Spermophilus lateralis","Coendou prehensilis","Paraxerus cepapi","Dolichitus patagonum","Agama sp.","Tauraco porphyrelophus","Zenaida asiatica","Pseudoleistes virescens","Phoenicopterus ruber","Cracticus nigroagularis","Plocepasser mahali","Paradoxurus hermaphroditus","Heloderma horridum","Papio cynocephalus","Vanellus chilensis","Oreamnos americanus","Dusicyon thous","Naja haje","Ictonyx striatus","Dicrostonyx groenlandicus","Spermophilus lateralis","Francolinus coqui","Cathartes aura","Buteo galapagoensis","Felis concolor","Corythornis cristata","Zosterops pallidus","Naja haje","unavailable","Paroaria gularis","Stercorarius longicausus","unavailable","Manouria emys","Anthropoides paradisea","Herpestes javanicus","Heloderma horridum","Aquila chrysaetos","Boa constrictor mexicana","Bucephala clangula","Dusicyon thous","Equus burchelli","Dusicyon thous","unavailable","Phoenicopterus chilensis","Actophilornis africanus","Mungos mungo","Thylogale stigmatica","Heloderma horridum","Ourebia ourebi","Kobus defassa","Ateles paniscus","Phalacrocorax niger","Spermophilus richardsonii","Psophia viridis","Hymenolaimus malacorhynchus","Bucephala clangula","Tiliqua scincoides","Geochelone elephantopus","Ovibos moschatus","Felis concolor","Potos flavus","Vulpes cinereoargenteus","Eutamias minimus","Lepus townsendii","Chlamydosaurus kingii","Laniarius ferrugineus","Odocoileus hemionus","Tockus flavirostris","Vulpes cinereoargenteus","Psophia viridis","Antidorcas marsupialis","Nectarinia chalybea","Lybius torquatus","Felis concolor","Coluber constrictor","unavailable","Uraeginthus granatina","Hippotragus niger","Lorythaixoides concolor","Crotalus adamanteus","Naja haje","Damaliscus lunatus","Lamprotornis nitens","Felis wiedi or Leopardus weidi","Drymarchon corias couperi","Milvago chimachima","Amblyrhynchus cristatus","Naja nivea","Bettongia penicillata","Ursus maritimus","Oryx gazella callotis","Zosterops pallidus","Tayassu tajacu","Acrantophis madagascariensis","Cereopsis novaehollandiae","Aonyx capensis","Anas platyrhynchos","Uraeginthus angolensis","Geochelone elegans","Terrapene carolina","Galago crassicaudataus","Estrilda erythronotos","Grus canadensis","Vanellus sp.","Dicrostonyx groenlandicus","Leprocaulinus vipera","Picoides pubescens","Macaca nemestrina","Papio cynocephalus","Lama guanicoe","Felis chaus","Bettongia penicillata","Theropithecus gelada","Anitibyx armatus","Streptopelia senegalensis","Pteronura brasiliensis","Actophilornis africanus","Felis rufus","Cacatua tenuirostris","Macaca nemestrina","Crotalus triseriatus","Cereopsis novaehollandiae","Iguana iguana","Oxybelis fulgidus","Pycnonotus barbatus","Cynictis penicillata","Megaderma spasma","Ninox superciliaris","Amphibolurus barbatus","Haliaeetus leucocephalus","Agkistrodon piscivorus","Colaptes campestroides","unavailable","Tenrec ecaudatus","Erinaceus frontalis","Tetracerus quadricornis","Trichosurus vulpecula","Macaca mulatta","Cathartes aura","Stenella coeruleoalba","Isoodon obesulus","Phalacrocorax niger","Felis rufus","Callipepla gambelii","Meles meles","Taxidea taxus","Nyctea scandiaca","Cebus apella","Elephas maximus bengalensis","Sula nebouxii","Echimys chrysurus","Plegadis ridgwayi","Vicugna vicugna","Sus scrofa","unavailable","Pavo cristatus","Varanus sp.","Acrantophis madagascariensis","Alcelaphus buselaphus cokii","Felis concolor","Delphinus delphis","unavailable","Falco peregrinus","unavailable","Potamochoerus porcus","Mellivora capensis","Anastomus oscitans","Dasypus novemcinctus","Plectopterus gambensis","Zosterops pallidus","Cercopithecus aethiops","Phalaropus fulicarius","Sylvicapra grimma","Taxidea taxus","Cervus unicolor","Hippotragus niger","Dicrostonyx groenlandicus","Hystrix indica","Myotis lucifugus","Haliaeetus leucoryphus","Merops bullockoides","Colaptes campestroides","Felis chaus","Phascogale calura","Varanus salvator","Lasiodora parahybana","Tringa glareola","Felis silvestris lybica","Nasua nasua","Casmerodius albus","Sauromalus obesus","Porphyrio porphyrio","Bubo virginianus","Cordylus giganteus","Manouria emys","Trachyphonus vaillantii","Dasyurus viverrinus","Paradoxurus hermaphroditus","Pavo cristatus","Choloepus hoffmani","Myotis lucifugus","Varanus salvator","Coendou prehensilis","Pelecans onocratalus","Sula nebouxii","Aonyx cinerea","Libellula quadrimaculata","Milvago chimachima","Sterna paradisaea","Sarcorhamphus papa","Panthera tigris","Colobus guerza","Isoodon obesulus","Phasianus colchicus","Martes pennanti","Priodontes maximus","Felis concolor","Gyps bengalensis","Sylvicapra grimma","Varanus sp.","Dasyurus maculatus","Callipepla gambelii","Anas punctata","Ceryle rudis","Anas punctata","Hippotragus equinus","Ceryle rudis","Anastomus oscitans","Diceros bicornis","Choloepus hoffmani","Haliaetus vocifer","Dicrostonyx groenlandicus","Leptoptilus dubius","Nycticorax nycticorax","Pitangus sulphuratus","Centrocercus urophasianus","Dromaeus novaehollandiae","Cracticus nigroagularis","Tamiasciurus hudsonicus","Meleagris gallopavo","Aegypius tracheliotus","Tamiasciurus hudsonicus","Melursus ursinus","Lama guanicoe","Butorides striatus","Uraeginthus granatina","Canis lupus lycaon","Alouatta seniculus","Macaca radiata","Libellula quadrimaculata","Heloderma horridum","Felis silvestris lybica","Fratercula corniculata","Grus canadensis","Mephitis mephitis","Papilio canadensis","Macaca nemestrina","Stercorarius longicausus","Bassariscus astutus","Columba palumbus","Nucifraga columbiana","Agkistrodon piscivorus","Acrobates pygmaeus","Graspus graspus","Buteo jamaicensis","Merops bullockoides","Butorides striatus","Podargus strigoides","Thamnolaea cinnmomeiventris","Dicrostonyx groenlandicus","Lybius torquatus","Procyon cancrivorus","Vanessa indica","Balearica pavonina","Macropus parryi","Cygnus buccinator","Morelia spilotes variegata","Prionace glauca","Sitta canadensis","Crotalus adamanteus","Nucifraga columbiana","Pterocles gutturalis","Buteo galapagoensis","Macropus eugenii","Sciurus vulgaris","Haliaetus leucogaster","Trichosurus vulpecula","Canis lupus","Cervus duvauceli","Dasypus novemcinctus","Dipodomys deserti","Cordylus giganteus","Hyaena brunnea","Ursus arctos","Mellivora capensis","Heloderma horridum","Ursus americanus","Lemur fulvus","Felis chaus","Dusicyon thous","Tachyglossus aculeatus","Antilocapra americana","Lama glama","Lophoaetus occipitalis","Naja sp.","Ovis dalli stonei","Dendrocygna viduata","Dromaeus novaehollandiae","Felis wiedi or Leopardus weidi","Butorides striatus","Chlamydosaurus kingii","Uraeginthus angolensis","Parus atricapillus","Eremophila alpestris","Physignathus cocincinus","Melanerpes erythrocephalus","Varanus salvator","Phaethon aethereus","Damaliscus dorcas","Agama sp.","Elephas maximus bengalensis","Sula dactylatra","Crotalus cerastes"]

# upperbound = sympy.nextprime(10 ** 5)
upperbound = 2 ** 12
data = [None] * upperbound
for i in range(upperbound):
    # data[i] = ''.join(random.choice(string.ascii_uppercase + string.ascii_lowercase + string.digits) for _ in range(16))
    data[i] = str(i)
    # data[i] = i

data = list(set(data))

def shitty_hash(prehash, bound):
    return prehash % 5

def hash_division(prehash, bound):
    return prehash % bound

def hash_multiplication(prehash, bound):
    A = ( sqrt(5)-1 ) / 2
    return floor(bound * (Decimal(prehash) * Decimal(A) % 1))

P = sympy.nextprime(len(data))
A = random.randint(1, P-1)
B = random.randint(0, P-1)

def universal_hashing(prehash, bound):
    return (A * prehash + B) % P % bound

# some indicator of quality of hash function where 100% mean perfect hashing and 0% means f(x) -> c

generatePlot(data, shitty_hash, hash_division)


#todo: refactor this
#todo: loading bar

#todo: proper hash fit to data coefficient
